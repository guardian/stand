import { Meta, Story } from '@storybook/addon-docs/blocks';
import ButtonStories, {
	ButtonTable,
	WithIconAllVariants,
	CustomTheme,
	CssOverrides,
} from './Button.stories';
import {
	SandboxReact,
	SandboxCss,
	SandboxJs,
} from '../../util/storybook/sandbox/Sandbox';
import {
	componentName,
	componentCss,
	componentHtml,
	componentJs,
	componentTsx,
} from './sandbox';

<Meta of={ButtonStories} />

# Button

A React Aria powered button that follows Stand design and accessibility defaults. It supports multiple visual variants, four sizes, disabled state handling, and render props for pending interactions. See React Aria guidance in their [Button docs](https://react-aria.adobe.com/Button).

## When to use

- Primary and secondary actions that require clear affordance
- Form submissions or confirm/cancel flows
- Re-usable button styles that align with Stand tokens

## Peer dependencies

- `@emotion/react`
- `react`
- `react-dom`
- `react-aria-components`
- `typescript`

See the `peerDependencies` section of `package.json` for compatible versions.

See [custom component build](#custom-component-build) for usage without React/Emotion.

## Example usage

<SandboxReact
	flowColumn
	componentName={componentName}
	componentTsx={componentTsx}
/>

```tsx
import { Button } from '@guardian/stand/button';
import type { ButtonProps, ButtonTheme } from '@guardian/stand/button';

const Example = () => (
	<>
		<Button
			variant="emphasised-primary"
			size="md"
			onPress={() => {
				console.log('Primary action');
			}}
		>
			Publish
		</Button>

		<Button variant="neutral-secondary" size="sm" isDisabled>
			Disabled
		</Button>

		{/* Icon via MaterialSymbol name */}
		<Button variant="emphasised-primary" size="md" icon="add">
			New item
		</Button>

		{/* Icon via SVG element */}
		<Button
			variant="neutral-secondary"
			size="md"
			icon={
				<svg aria-hidden viewBox="0 0 24 24">
					<path d="M19 13H5v-2h14v2z" />
				</svg>
			}
		>
			Remove
		</Button>
	</>
);
```

## Props

| Name           | Type                                                                                               | Required | Default                | Description                                                                                                                                                                                                                                                                                                                                                      |
| -------------- | -------------------------------------------------------------------------------------------------- | -------- | ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `size`         | `'xs'` \| `'sm'` \| `'md'` \| `'lg'`                                                               | No       | `'md'`                 | Controls the button dimensions and typography.                                                                                                                                                                                                                                                                                                                   |
| `variant`      | `'emphasised-primary'` \| `'emphasised-secondary'` \| `'neutral-primary'` \| `'neutral-secondary'` | No       | `'emphasised-primary'` | Chooses the colour scheme and interaction states.                                                                                                                                                                                                                                                                                                                |
| `children`     | `ReactNode` \| `RenderProps`                                                                       | Yes      | N/A                    | Content inside the button. Render props receive `{ isPending }` from React Aria.                                                                                                                                                                                                                                                                                 |
| `icon`         | `IconProps['symbol']` \| `Exclude<IconProps['children'], string>`                                  | No       | N/A                    | Icon rendered inside the button, before the label. Accepts a `MaterialSymbol` name or a non-string `ReactNode` (e.g. an SVG element). Size is inherited from `size`, except for `xs` buttons which use `sm`. See ["Installing Icons"](/docs/stand-tools-design-system-components-icon--docs#installing-icons) for how to set up your project to work with icons. |
| `isDisabled`   | `boolean`                                                                                          | No       | `false`                | Disables interaction and applies disabled styling.                                                                                                                                                                                                                                                                                                               |
| `theme`        | `ButtonTheme` (partial)                                                                            | No       | N/A                    | Override Stand tokens for this instance; merged over the default theme.                                                                                                                                                                                                                                                                                          |
| `cssOverrides` | `SerializedStyles` \| `SerializedStyles[]`                                                         | No       | N/A                    | Low-level escape hatch for Emotion overrides when theming is insufficient.                                                                                                                                                                                                                                                                                       |
| `className`    | `string`                                                                                           | No       | N/A                    | Optional class name forwarded to the root React Aria button.                                                                                                                                                                                                                                                                                                     |
| `...props`     | `ReactAria Button` props                                                                           | No       | N/A                    | All other props from `react-aria-components` `Button` (e.g. `type`, `autoFocus`, event handlers).                                                                                                                                                                                                                                                                |

**`size` and `variant`**

- Sizes: `xs`, `sm`, `md`, `lg`
- Variants: `emphasised-primary`, `emphasised-secondary`, `neutral-primary`, `neutral-secondary`

## Stories

### All variants and sizes

<Story of={ButtonTable} />

### With icon - all variants and sizes

<Story of={WithIconAllVariants} />

## Customisation

We recommend using the default theme. When needed, use the `theme` or `cssOverrides` props.

### Custom theme

<Story of={CustomTheme} />

```tsx
import type { ButtonTheme } from '@guardian/stand/button';
import { Button } from '@guardian/stand/button';
import { baseColors } from '@guardian/stand';

const customTheme: Partial<ButtonTheme> = {
	'emphasised-primary': {
		shared: {
			backgroundColor: baseColors['cool-purple'][200],
			color: baseColors['cool-purple'][900],
			border: `2px solid ${baseColors['cool-purple'][700]}`,
			':hover': {
				backgroundColor: baseColors['cool-purple'][300],
				border: `2px solid ${baseColors['cool-purple'][700]}`,
			},
			':active': {
				backgroundColor: baseColors['cool-purple'][400],
				border: `2px solid ${baseColors['cool-purple'][700]}`,
			},
		},
	},
};

const Component = () => (
	<Button variant="emphasised-primary" size="md" theme={customTheme}>
		Custom Themed Button
	</Button>
);
```

### CSS overrides

<Story of={CssOverrides} />

```tsx
import { Button } from '@guardian/stand/button';
import { baseSpacing } from '@guardian/stand';
import { css } from '@emotion/react';

const customStyles = css`
	width: 100%;
	text-transform: full-width;
	font-variant: small-caps;
	padding-inline: ${baseSpacing['24-rem']};
`;

const Component = () => (
	<Button variant="neutral-primary" size="sm" cssOverrides={customStyles}>
		CSSOverrides Button
	</Button>
);
```

## Custom Component Build

If you're not using React/Emotion, or `@guardian/stand` is not compatible with your project, you can create a custom `Button`/`LinkButton` component using the styles defined in the `ButtonTheme` type.

You will however be responsible for any additional functionality on top of the styles, for example accessibility, focus management, interaction states etc.

**`css`**

You can import the Button styles as CSS from the package, make sure that your build process supports importing CSS from `node_modules`/`package.json`:

<SandboxCss
	componentName={componentName}
	componentHtml={componentHtml}
	componentCss={componentCss}
/>

**TypeScript/JavaScript**

Use the `componentButton` variable and the `ComponentButton` type to define your custom styles in TypeScript/JavaScript:

<SandboxJs componentName={componentName} componentJs={componentJs} />
