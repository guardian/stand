import { Meta, Story } from '@storybook/addon-docs/blocks';
import FaviconStories, {
	Letter,
	IconSymbol,
	IconSvg,
	Image,
	CustomTheme,
	CssOverrides,
} from './Favicon.stories';

<Meta of={FaviconStories} />

# Favicon

The Favicon component represents an application's icon. It supports a single letter, SVG or image design.

## When to use

- Identify the application, for example in a header bar component

## Peer dependencies

- `@emotion/react`
- `react`
- `react-dom`
- `typescript`

See the `peerDependencies` section of `package.json` for compatible versions.

See [custom component build](#custom-component-build) for usage without React/Emotion.

See [Icon component](?path=/docs/stand-editorial-design-system-components-icon--docs#installing-icons) for more on installing icons.

## Example usage

See "Emotion/React" heading under the "Favicon" component on [codesandbox.io](https://codesandbox.io/p/sandbox/guardian-stand-components-forked-j8cjhy)

```tsx
import { Favicon } from '@guardian/stand/favicon';

/* types, if required */
import type { FaviconProps, FaviconTheme } from '@guardian/stand/favicon';

/* Letter */
<Favicon letter="F" />

/* Icon */
<Favicon icon="email" />

/* Image */
<Favicon
	src="https://example.com/favicon.jpg"
	alt="App icon"
/>
```

## Props

| Name           | Type                                                              | Required    | Default | Description                                                                                                                           |
| -------------- | ----------------------------------------------------------------- | ----------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| `letter`       | `string`                                                          | Conditional | N/A     | Letter to render in the favicon.                                                                                                      |
| `icon`         | `IconProps['symbol']` \| `Exclude<IconProps['children'], string>` | Conditional | N/A     | Icon rendered inside the favicon. Accepts a `MaterialSymbol` name or a non-string `ReactNode` (e.g. an SVG element). Size is default. |
| `src`          | `string`                                                          | Conditional | N/A     | URL of the favicon image.                                                                                                             |
| `alt`          | `string`                                                          | Conditional | N/A     | Alt text for the image for accessibility.                                                                                             |
| `theme`        | `FaviconTheme`                                                    | No          | N/A     | Custom theme overrides for the favicon.                                                                                               |
| `cssOverrides` | `SerializedStyles`                                                | No          | N/A     | Custom CSS styles for the favicon.                                                                                                    |
| `className`    | `string`                                                          | No          | N/A     | Additional class name(s) for the favicon.                                                                                             |

One of `letter`, `icon` and `src` must be supplied. When using `src`, the `alt` prop is required for accessibility.

## Stories

### Letter

<Story of={Letter} />

### Icon Symbol

<Story of={IconSymbol} />

### Icon SVG

<Story of={IconSvg} />

### Image

<Story of={Image} />

## Customisation

We recommend using the Favicon component as provided, but it can be customised using the `theme` or `cssOverrides` props as required.

### Custom theme

The `theme` prop allows you to override specific design tokens for the Favicon component:

<Story of={CustomTheme} />

```tsx
import type { FaviconTheme } from '@guardian/stand/favicon';
import { Favicon } from '@guardian/stand/favicon';
import { baseColors, baseSizing } from '@guardian/stand';

const customTheme: FaviconTheme = {
	color: {
		blue: {
			background: baseColors['cool-purple'][700],
			text: baseColors.orange[300],
		},
	},
};

const Component = () => <Favicon letter="C" theme={customTheme} />;
```

### CSS overrides

The `cssOverrides` prop allows you to pass custom CSS to the Favicon component, if the theme prop is not sufficient:

<Story of={CssOverrides} />

```tsx
import { Favicon } from '@guardian/stand/favicon';
import { baseColors, baseSizing, baseSpacing } from '@guardian/stand';
import { css } from '@emotion/react';

const customStyles = css`
	border: ${baseSizing['size-2-rem']} solid ${baseColors.red[500]};
	background-color: ${baseColors.orange[700]};
	color: ${baseColors['warm-purple'][300]};
	border-radius: ${baseRadius['corner-4-px']};
`;

const Component = () => <Favicon letter="O" cssOverrides={customStyles} />;
```

## Custom Component Build

If you're not using React/Emotion, or `@guardian/stand` is not compatible with your project, you can create a custom Favicon component using the styles defined in the `FaviconTheme` type.

You will however be responsible for any additional functionality on top of the styles, for example image loading, image fallback, accessibility etc.

See "Custom Component" heading under the "Favicon" component on [codesandbox.io](https://codesandbox.io/p/sandbox/guardian-stand-components-forked-j8cjhy)

**`css`**

You can import the Favicon styles as CSS from the package, make sure that your build process supports importing CSS from `node_modules`/`package.json`:

```css
/* import the font and favicon styles */
@import '@guardian/stand/fonts/OpenSans.css';
@import '@guardian/stand/component/favicon.css';

/*
or for scenarios where you have to use relative paths/node_modules directly:

@import 'node_modules/@guardian/stand/dist/fonts/OpenSans.css';
@import 'node_modules/@guardian/stand/dist/styleD/build/css/component/favicon.css';
*/

/* example setup of favicon style */
.stand-favicon {
	background-color: var(--component-favicon-color-background);
	display: var(--component-favicon-display);
	align-items: var(--component-favicon-align-items);
	justify-content: var(--component-favicon-justify-content);
	width: var(--component-favicon-size);
	height: var(--component-favicon-size);
	user-select: var(--component-favicon-user-select);
	color: var(--component-favicon-color-text);
	font: var(--component-favicon-typography-font);
	letter-spacing: var(--component-favicon-typography-letter-spacing);
	font-variation-settings: 'wdth' var(--component-favicon-typography-font-width);
}

.stand-favicon-icon {
	display: var(--component-icon-shared-display);
	user-select: var(--component-icon-shared-user-select);
	font-size: var(--component-icon-lg-size);
	color: var(--base-colors-magenta-400);
}

.stand-favicon-icon-color-svg > svg {
	width: var(--component-icon-md-size);
	height: var(--component-icon-md-size);
	fill: var(--semantic-colors-text-inverse-strong);
}

/* example setup for favicon image */
.stand-favicon > img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}
```

```html
<!-- example usage of favicon style in html with favicon -->
<div class="stand-favicon">C</div>

<!-- example usage of favicon style in html with favicon image -->
<div class="stand-favicon">
	<img src="https://example.com/favicon.jpg" alt="App icon" />
</div>
```

**TypeScript/JavaScript**

Use the `componentFavicon` variable and the `ComponentFavicon` type to define your custom styles in TypeScript/JavaScript:

```ts
import type { ComponentFavicon } from '@guardian/stand'; // if types required
import { componentFavicon } from '@guardian/stand';

const style = `
    background-color: ${componentFavicon.color.background};
    display: ${componentFavicon.display};
    align-items: ${componentFavicon['align-items']};
    justify-content: ${componentFavicon['justify-content']};
    width: ${componentFavicon.size};
    height: ${componentFavicon.size};
    user-select: ${componentFavicon['user-select']};
`;

const typographyStyle = `
    color: ${componentFavicon.color.text};
    font: ${componentFavicon.typography.font};
    letter-spacing: ${componentFavicon.typography.letterSpacing};
    font-variation-settings: 'wdth' ${componentFavicon.typography.fontWidth};
`;

const imgStyle = `
  width: 100%;
  height: 100%;
  object-fit: cover;
`;

const iconStyles = `
  display: ${componentIcon.shared.display};
  user-select: ${componentIcon.shared['user-select']};
  font-size: ${componentIcon.md.size};
  color: ${componentFavicon.color.text};
`;

const iconSvgStyles = `
  width: ${componentIcon.md.size};
  height: ${componentIcon.md.size};
`;

// e.g. adding to DOM using vanilla JS styles
document.getElementById('app')!.innerHTML = `
    <h2>
        Using <code>typescript</code>/<code>javascript</code>
    </h2>
    <div style="${style}${typographyStyle}">C</div>
    <div style="${style}>
        <span class="material-symbols" style="${iconStyles}"><svg style="${iconSvgStyles}"...>...</svg></span>
    </div>
    <div style="${style}">
        <img
            style="${imgStyle}"
            src="https://example.com/favicon.jpg"
            alt="App icon"
        />
    </div>
`;
```
